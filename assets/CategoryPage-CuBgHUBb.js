import{r as s,u as C,j as e,C as P,g as U,S as A,F as H,a as M}from"./index-B-pj44g2.js";import{E as q}from"./EmptyState-BMjtV7YP.js";import{C as D}from"./chevron-right-BXXCX4Ak.js";const G=[{name:"Body & Parts",route:"/body-chassis"},{name:"Engine & Performance",route:"/engine-performance"},{name:"Wheels & Tires",route:"/wheels-tires"},{name:"Lighting & Electronics",route:"/lighting-electronics"},{name:"Accessories",route:"/accessories"},{name:"Fluids & Car Care",route:"/fluids-care"},{name:"Automotive Tools",route:"/automotive-tools"},{name:"Cooling & AC",route:"/cooling-ac"}];function J({currentCategory:i}){const[o,d]=s.useState(!1),f=C(),m=s.useRef(null);return s.useEffect(()=>{const n=u=>{m.current&&!m.current.contains(u.target)&&d(!1)},x=u=>{m.current&&!m.current.contains(u.target)&&d(!1)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",x),()=>{document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",x)}},[]),e.jsxs("div",{ref:m,className:"inline-block overflow-visible",children:[e.jsxs("button",{onClick:()=>d(!o),className:"group flex items-center gap-2 text-white hover:text-yellow-500 transition-all duration-300 font-black uppercase italic tracking-widest text-[10px]",children:[e.jsx("span",{className:"hidden sm:inline-block sm:max-w-0 sm:overflow-hidden sm:whitespace-nowrap sm:opacity-0 sm:group-hover:max-w-[140px] sm:group-hover:opacity-100 sm:transition-all sm:duration-300",children:"Change Category"}),e.jsx(P,{className:`w-7 h-7 transition-transform duration-300 ${o?"rotate-180":""}`})]}),o&&e.jsx("div",{className:`\r
          absolute top-full left-0 mt-2 \r
          w-60 bg-grey/95 backdrop-blur-md \r
          border border-white/10 z-[100] \r
          max-h-[60vh] overflow-y-auto overflow-x-hidden\r
        `,children:e.jsx("div",{className:"flex flex-col",children:G.map(n=>e.jsxs("button",{onClick:()=>{f(n.route),d(!1)},className:`w-full flex items-center justify-between px-5 py-4 text-left transition-all duration-200 border-b border-white/5 last:border-0 group ${i===n.name?"bg-yellow-500 text-black":"text-yellow-500 hover:bg-yellow-500 hover:text-black"}`,children:[e.jsx("span",{className:"text-[12px] font-black uppercase tracking-[0.1em]",children:n.name}),e.jsx(D,{size:12,className:i===n.name?"text-black":"text-yellow-500"})]},n.route))})})]})}function Y({title:i="Category",categoryQuery:o="",heroImage:d="",heroDescription:f="",partTypeFilters:m=[],brandFilters:n=[],metadataKey:x=null}){const u=C(),[k,E]=s.useState(1e4),[p,I]=s.useState(1e4),[j,W]=s.useState([]),[h,T]=s.useState([]),[g,F]=s.useState(!1),[w,O]=s.useState({price:!0,partType:!0,brand:!0,availability:!0}),[y,L]=s.useState(!1),[R,N]=s.useState(!0),[S,$]=s.useState([]);s.useEffect(()=>{(async()=>{N(!0);try{const c=await(await fetch("http://localhost:3001/api/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:o,pageSize:100})})).json();c.success&&$(c.data.map(r=>({id:r.id,name:r.itemName,price:parseFloat(r.price)||0,image:r.mainImage?.url||"/api/placeholder/200/200",status:r.quantity>0?"In Stock":"Out of Stock",verified:!0,partType:r.partType||"",brand:r.brand||""})))}catch(a){console.error("Error fetching products:",a)}finally{N(!1)}})()},[o]),s.useEffect(()=>{const t=setTimeout(()=>{E(p)},120);return()=>clearTimeout(t)},[p]);const b=s.useMemo(()=>S.filter(t=>{const a=t.price<=k,c=g?t.status==="In Stock":!0,r=j.length>0?j.includes(t.partType):!0,B=h.length>0?h.includes(t.brand):!0;return a&&c&&r&&B}),[S,k,g,j,h]),v=({title:t,filterName:a,children:c})=>e.jsxs("div",{className:"border-b border-gray-100 last:border-none",children:[e.jsxs("button",{onClick:()=>O(r=>({...r,[a]:!r[a]})),className:"flex items-center justify-between w-full py-4",children:[e.jsx("span",{className:"text-xs font-black uppercase tracking-widest text-gray-900",children:t}),e.jsx(P,{className:`w-4 h-4 transition-transform duration-300 ${w[a]?"rotate-180":""}`})]}),e.jsx("div",{className:`overflow-hidden transition-all duration-300 ${w[a]?"max-h-96 pb-4":"max-h-0"}`,children:e.jsx("div",{className:"space-y-2",children:c})})]}),l=x?U(x):null,z=[{name:"Home",url:"/"},{name:i,url:window.location.pathname}];return e.jsxs("div",{className:"min-h-screen bg-white",children:[l&&e.jsx(A,{title:l.title,description:l.description,keywords:l.keywords,ogUrl:l.url,ogImage:l.ogImage,ogType:l.ogType,canonicalUrl:l.url,breadcrumbs:z}),e.jsxs("section",{className:"relative z-20 overflow-visible h-[300px] md:h-[400px] w-full flex items-center bg-black",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-60",style:{backgroundImage:`url(${d})`}}),e.jsxs("div",{className:"relative z-30 max-w-7xl mx-auto px-6 w-full text-white",children:[e.jsxs("div",{className:"relative flex items-center gap-3",children:[e.jsx("h1",{className:"text-4xl md:text-6xl font-black uppercase italic tracking-tighter mb-2",children:i}),e.jsx(J,{currentCategory:i})]}),e.jsx("p",{className:"text-md md:text-lg text-gray-200 max-w-xl font-medium",children:f})]})]}),e.jsxs("div",{className:"relative z-0 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"lg:hidden mb-6",children:e.jsxs("button",{onClick:()=>L(!y),className:"w-full flex items-center justify-between bg-gray-900 text-white px-6 py-4 rounded-none font-black uppercase italic tracking-widest text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4"}),e.jsx("span",{children:y?"Hide Filters":"Show Filters"})]}),e.jsxs("span",{children:[b.length," Items"]})]})}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-10",children:[e.jsx("aside",{className:`
            ${y?"block":"hidden"} 
            lg:block lg:w-72 lg:shrink-0
            border-b lg:border-none border-gray-100 mb-8 lg:mb-0
          `,children:e.jsxs("div",{className:"sticky top-24 space-y-2",children:[e.jsx("h2",{className:"hidden lg:block text-xl font-black uppercase italic mb-6 tracking-tighter",children:"Refine Search"}),e.jsxs(v,{title:"Price Limit",filterName:"price",children:[e.jsx("input",{type:"range",min:"0",max:"10000",step:"100",value:p,onChange:t=>I(parseInt(t.target.value)),className:"w-full h-1.5 bg-gray-100 rounded-lg appearance-none cursor-pointer accent-black"}),e.jsxs("div",{className:"flex justify-between items-center mt-3",children:[e.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Max Price"}),e.jsxs("span",{className:"text-xs font-black bg-black text-white px-2 py-1",children:["GH₵",p.toLocaleString()]})]})]}),e.jsx(v,{title:"Brand",filterName:"brand",children:e.jsx("div",{className:"grid grid-cols-1 gap-2",children:n.map(t=>e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer group",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 border-gray-300 text-black focus:ring-black",checked:h.includes(t),onChange:()=>T(a=>a.includes(t)?a.filter(c=>c!==t):[...a,t])}),e.jsx("span",{className:"text-sm font-bold text-gray-500 group-hover:text-black transition-colors uppercase",children:t})]},t))})}),e.jsx(v,{title:"Stock Status",filterName:"availability",children:e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer group",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 border-gray-300 text-black focus:ring-black",checked:g,onChange:()=>F(!g)}),e.jsx("span",{className:"text-sm font-bold text-gray-500 group-hover:text-black uppercase",children:"In Stock Only"})]})})]})}),e.jsxs("main",{className:"flex-1",children:[e.jsxs("div",{className:"hidden lg:flex justify-between items-end mb-8 border-b border-gray-100 pb-4",children:[e.jsx("h2",{className:"text-xs font-black uppercase tracking-[0.2em] text-gray-400",children:"Inventory Catalog"}),e.jsxs("p",{className:"text-xs font-black text-black uppercase",children:[b.length," Units Available"]})]}),R?e.jsx(M,{}):b.length===0?e.jsx("div",{className:"py-20",children:e.jsx(q,{message:"Zero results for current filters."})}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-x-4 gap-y-12 md:gap-x-8",children:b.map(t=>e.jsxs("div",{onClick:()=>u(`/product/${t.id}`,{state:{product:t}}),className:"group cursor-pointer",children:[e.jsx("div",{className:"aspect-[4/5] bg-gray-50 mb-4 overflow-hidden relative border border-gray-50",children:e.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-contain mix-blend-multiply group-hover:scale-110 transition-transform duration-700"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xs md:text-sm font-black text-gray-900 uppercase tracking-tight line-clamp-2 leading-tight group-hover:text-red-600 transition-colors",children:t.name}),e.jsxs("div",{className:"flex flex-col gap-1 pt-1",children:[e.jsxs("span",{className:"text-lg font-black italic tracking-tighter text-black",children:["GH₵",t.price.toFixed(2)]}),e.jsx("div",{className:`text-[9px] font-black uppercase w-fit px-2 py-0.5 border ${t.status==="In Stock"?"border-green-500 text-green-600":"border-red-500 text-red-600"}`,children:t.status})]})]})]},t.id))})]})]})]})]})}export{Y as C};
